<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webtoon Gallery</title>
    <style>
      body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; background-color: #f4f4f9; margin: 0; padding: 20px; }
      h1 { text-align: center; color: #333; }
      #gallery {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
        gap: 20px;
        max-width: 1200px;
        margin: 0 auto;
      }
      .card {
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        overflow: hidden;
        text-decoration: none;
        color: inherit;
        transition: transform 0.2s ease-in-out;
        display: flex;
        flex-direction: column;
      }
      .card:hover {
        transform: translateY(-5px);
      }
      .card img {
        width: 100%;
        height: 250px;
        object-fit: cover;
        background-color: #eee;
      }
      .card-content {
        padding: 15px;
        flex-grow: 1;
        display: flex;
        flex-direction: column;
      }
      .card-content h3 {
        margin: 0 0 5px 0;
        font-size: 16px;
        /* 긴 제목은 ...으로 처리 */
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .card-content p {
        margin: 0;
        font-size: 12px;
        color: #777;
        flex-grow: 1;
      }
      .card-content .episodes {
         margin-top: 10px;
         font-size: 14px;
         color: #007BFF;
         font-weight: bold;
      }
    </style>
</head>
<body>
    <h1>Webtoon Gallery</h1>
    <div id="gallery"></div>

    <script>
      // 이 JavaScript 코드가 브라우저에서 직접 실행됩니다.
      document.addEventListener('DOMContentLoaded', function() {
        // GitHub의 webtoons.json 파일 URL (jsDelivr CDN 사용)
        const jsonUrl = 'https://raw.githubusercontent.com/yusonp/webtoon-assets/master/webtoons.json';  
        // const jsonUrl = `https://cdn.jsdelivr.net/gh/yusonp/webtoon-assets@master/webtoons.json?v=${new Date().getTime()}`;

        // fetch API를 사용해 JSON 데이터를 비동기적으로 가져옵니다.
        fetch(jsonUrl)
          .then(response => {
            if (!response.ok) {
              throw new Error('Network response was not ok ' + response.statusText);
            }
            return response.json();
          })
          .then(webtoons => {
            const gallery = document.getElementById('gallery');
            gallery.innerHTML = ''; // 기존 내용을 비웁니다.

            // 각 웹툰 데이터를 순회하며 HTML 카드를 생성합니다.
            webtoons.forEach(webtoon => {
              const card = `
                <a href="${webtoon.url}" target="_blank" class="card">
                  <img src="${webtoon.thumbnail}" alt="${webtoon.title}" loading="lazy">
                  <div class="card-content">
                    <h3>${webtoon.title}</h3>
                    <p>작가: ${webtoon.author}</p>
                    <p class="episodes">${webtoon.episodes}화</p>
                  </div>
                </a>
              `;
              gallery.insertAdjacentHTML('beforeend', card);
            });
          })
          .catch(error => {
            console.error('Error fetching webtoon data:', error);
            const gallery = document.getElementById('gallery');
            gallery.innerHTML = '<p style="text-align: center;">데이터를 불러오는 데 실패했습니다. 잠시 후 다시 시도해주세요.</p>';
          });
      });
    </script>
</body>
</html>
